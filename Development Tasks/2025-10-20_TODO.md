# Development Tasks - October 20, 2025

## Task List Filtering
**Status**: Not Started

**Task**: Task list (job board) should only show tasks whose project is using task-based scheduling.

**Implementation**: Filter out tasks from project-based projects entirely. If a project is using project-based scheduling, its tasks should not be shown as they are not being used. When a project is changed to task-based scheduling, that project's tasks should appear in the list.

**Rationale**: Prevents confusion for users seeing a huge list of tasks and not knowing which are in use.

---

## Project Completion Cascade
**Status**: Not Started

**Task**: When a project is marked complete, all of that project's tasks should be marked complete.

**Implementation**:
- Sync task status changes to API
- Show confirmation dialog warning user that all incomplete tasks will be marked complete
- After confirmation, mark all tasks as completed and sync to backend

---

## Task List Sections
**Status**: Not Started

**Task**: Task list (job board) - move completed and cancelled tasks to collapsible sections.

**Implementation**:
- Create collapsible sections identical in formatting and style to project list's archived and closed sections
- Sections should start collapsed by default
- Show count badges: "COMPLETED (5)" and "CANCELLED (2)"
- Match exact styling of project list collapsible sections

---

## Selection Mode for Lists
**Status**: Future Implementation (V2)

**Task**: Task, project, client list (job board) - add 'select' option to quick actions menu.

**Implementation Details** (for future reference):
- Add "Select" option to quick actions menu
- Show checkboxes on cards when in selection mode
- Top bar actions: "Change Status", "Delete Selection", "Deselect All"
- "Change Status" shows all possible statuses (different for tasks vs projects)
- Delete selection requires confirmation dialog with count
- Include "Deselect All" button (no "Select All")

**Note**: Moving to V2_FEATURES_ROADMAP.md for now

---

## Project Details Notes Expansion
**Status**: Not Started

**Task**: Project details notes - if there are more lines of text that are collapsed, show that somehow.

**Implementation**:
- Display 3 lines of notes content before collapsing
- If more than 3 lines exist, show "Show more..." text and gradient fade effect
- Both gradient and "Show more" text should be visible when content is collapsed

---

## Job Board Archive Drag Issue
**Status**: Not Started

**Task**: Job board - dragging project to 'archive' does not work.

**Issue**: Drag gesture and UI responsiveness works visually, but functionality does not work.

**Investigation needed**: Why archive action is not completing despite visual feedback working.

---

## Job Board Padding
**Status**: Not Started

**Task**: Job board - need to add horizontal padding.

**Implementation**: Add consistent 16pt standard padding to match other views.

---

## Project Creation with Photos
**Status**: Not Started

**Task**: Project creation - creating project with photos does not work.

**Issue**: Photos are not being linked to the project. Uncertain if they are being uploaded to AWS.

**Investigation needed**:
- Check if photos are uploading to S3
- Verify project-photo linking in Bubble
- Check API response after project creation with photos

---

## Photo Delete Button Styling (Project Creation)
**Status**: Not Started

**Task**: In project creation (extended view), the X button on photos that have been added is being cut off.

**Issues**:
- X icon is positioned at the top but photo element is cutting off part of the icon
- X icon styling does not match OPS UI design

**Implementation**:
- Fix icon positioning to not be cut off
- Update X icon styling to match tactical minimalist design

---

## Delete Project Button
**Status**: Not Started

**Task**: Project details - add a delete project button.

**Implementation**:
- Add separate button at the bottom of ProjectDetailsView
- Available to admin/office crew only
- Show simple confirmation dialog
- Handle project deletion and sync to API

**Permissions**: Admin and office crew only

---

## Field Crew Add Photos Button
**Status**: Not Started

**Task**: Field crew cannot see the add photos button in project details view.

**Implementation**: Ensure add photos button is visible to field crew (they should be able to add photos even if they can't delete/modify other elements).

---

## Remove Autocorrect
**Status**: Not Started - IMPORTANT

**Task**: Remove predictive text/autocorrect from ALL input fields that are not addresses.

**Implementation**:
- Disable autocorrect for:
  - Project names
  - Client names
  - Task names
  - Notes fields
  - Phone numbers
  - Email addresses
  - All other text inputs except address fields

**Keep autocapitalization on**:
  - Project names
  - Client names
  - Task names
  - Other proper noun fields

**Code**: Set `.autocorrectionDisabled(true)` and keep `.textInputAutocapitalization(.words)` where appropriate

---

## Project-Based Calendar Event Title
**Status**: Not Started

**Task**: Project-based calendar event creation - change the title of the calendar event to the client's name.

**Current**: Calendar event title is set to project title
**New**: Calendar event title should be set to client's name

---

## Task Creation - Deactivate Project Calendar Event
**Status**: Not Started

**Task**: When tasks are created in-app, change the project's project-based calendar event 'active' to false.

**Rationale**: When a project is converted from project-based to task-based scheduling, we need to hide the project's calendar event (set active = false) because we should only show either task calendar events OR project calendar event, not both.

**Implementation**:
- When first task is created for a project
- Set project's primaryCalendarEvent.active = false
- Sync change to API

---

## Calendar Event Creation Bug
**Status**: Not Started - CRITICAL

**Task**: Calendar event creation - when adding new calendar event to company.calendarEventsList, we are SETTING the list to the new event instead of ADDING to it.

**Issue**: Each time a new calendar event is created, the list is being overwritten with only the new calendar event as the single entry.

**Implementation**: Fix to append to list rather than replace entire list.

**Location**: Check CalendarEvent creation in all endpoints and forms

---

## Task List Team Member Avatars
**Status**: Not Started

**Task**: Task list in project details view - assigned team member avatars are not being displayed on the card.

**Implementation**: Display team member avatars on task cards in TaskListView within ProjectDetailsView

---

## Task Deletion Dismissal Handling
**Status**: Not Started

**Task**: Deleting task from task list quick actions in project details view - after delete completes, the project details view and confirmation dialogue close abruptly.

**Issue**: Functionality works, but dismissal is not graceful.

**Implementation**:
- Handle dismissal gracefully
- Only dismiss confirmation dialog
- ProjectDetailsView should remain open
- Possibly show a toast/banner confirming deletion

---

## Job Board Search Bar Padding
**Status**: Not Started

**Task**: Job board view search bar (visible on client, project and task tabs) - add slight padding below.

**Implementation**: Add padding below search bar for better visual spacing

---

## Task Color Assignment Investigation
**Status**: Not Started - Investigation Only

**Task**: Explore how task color is being assigned when tasks are created. Some tasks do not have correct color when viewed in Bubble.

**Action**: Investigation only - do not write code yet. Document findings.

**Check**:
- Where task color is set during creation
- How TaskType color is applied
- If color is being synced to Bubble correctly
- If there's a default color fallback

---

## No Address Display
**Status**: Not Started

**Task**: Project cards, task cards - if no address is available, display "NO ADDRESS".

**Current**: Empty/blank when no address
**New**: Display "NO ADDRESS" text

**Implementation**: Add conditional check and display "NO ADDRESS" in secondaryText or appropriate location

---

## Summary
- **Critical**: 3 tasks (Autocorrect, Calendar Event Bug, Task Creation Calendar Event)
- **High Priority**: 8 tasks (Task filtering, Project completion cascade, Photo linking, etc.)
- **Medium Priority**: 6 tasks (UI polish, padding, styling)
- **Investigation**: 1 task (Task color assignment)
- **Future**: 1 task (Selection mode - moved to V2)

**Total Active Tasks**: 18
**Future Tasks**: 1
